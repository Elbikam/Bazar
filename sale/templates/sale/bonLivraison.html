{% extends 'sale/ticket_base.html' %}
{% block content %}
{% load static %}
{% load crispy_forms_tags %}

<div class="container" style="max-width: 800px; margin: 0 auto; padding: 20px; font-family: Arial, sans-serif;">
    <hr style="border: 2px solid #000000;">
    <h1 style="text-align: center; margin-bottom: 20px;">Bon de Livraison</h1>
    
    <!-- Delivery Details -->
    <div class="row">
        <div class="col-md-6">
            <p><strong>Facture ID:</strong> {{ sale_vendor.pk }}</p>
            <p><strong>Vendor:</strong> {{ sale_vendor.vendor.name }}</p>
            <p><strong>Date:</strong> {{ sale_vendor.date|date:"d/m/Y H:i:s" }}</p>
            <p><strong>Phone/Whatsapp:</strong> {{ sale_vendor.vendor.phone_whatsapp }}</p>
        </div>
    </div>

    <!-- Items Section -->
    <h2 style="border-bottom: 2px solid #333; padding-bottom: 5px; margin-top: 20px;">Items</h2>
    <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
        <thead>
            <tr style="background-color: #f4f4f4; font-weight: bold;">
                <th style="border: 1px solid #333; padding: 8px; text-align: center;">Item ID</th>
                <th style="border: 1px solid #333; padding: 8px; text-align: left;">Details</th>
                <th style="border: 1px solid #333; padding: 8px; text-align: center;">Quantity</th>
            </tr>
        </thead>
        <tbody>
            {% for order in sale_vendor.inlineorder_set.all %}
                {% if order.item.the %}
                <tr>
                    <td style="border: 1px solid #333; padding: 8px; text-align: center;">{{ order.item.id }}</td>
                    <td style="border: 1px solid #333; padding: 8px; text-align: left;">{{ order.item.the.detail }}</td>
                    <td style="border: 1px solid #333; padding: 8px; text-align: center;">{{ order.quantity }}</td>
                </tr>
                {% endif %}
                {% if order.item.parfum %}
                <tr>
                    <td style="border: 1px solid #333; padding: 8px; text-align: center;">{{ order.item.id }}</td>
                    <td style="border: 1px solid #333; padding: 8px; text-align: left;">{{ order.item.parfum.detail }}</td>
                    <td style="border: 1px solid #333; padding: 8px; text-align: center;">{{ order.quantity }}</td>
                </tr>
                {% endif %}
            {% empty %}
            <tr>
                <td colspan="3" style="border: 1px solid #333; padding: 8px; text-align: center;">No items found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Additional Notes Section -->
    <h2 style="border-bottom: 2px solid #333; padding-bottom: 5px; margin-top: 20px;">Notes</h2>
    <p>{{ delivery_note.additional_notes }}</p>
</div>

{% endblock %}
